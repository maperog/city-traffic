## 总体构成

### 模型：

**个体**：不同个体具有不同行进能力、突破能力、阻碍通行能力、目的地、规划行进路线。

需要支持：

- 不同个体的随机化或指定生成
- 对不同个体在同一道路上行进过程的粗略模拟
- 不同个体各自路线的生成



**道路**：不同道路有不同的可通行程度、通行方向限制。处于不同道路上的个体拥有自己在道路上的行进进度。

需要支持：

- 不同个体在某道路上的行进过程
- 不同个体在同一道路上的相互超越过程



**地点**：不同地点拥有不同的标号。处于不同地点上的个体可能不会立即进入行进路线。

需要支持：

- 不同个体在不同地点进入自身下一条行进路线的控制

    

### 模拟：

以时间颗粒的方式进行。

每轮次模拟一个短时间 $\Delta x$ 内所有个体的行进。

每个时间颗粒内依次进行以下步骤：

1. 对于所有正在道路上处于行进状态的个体进行行进模拟

    1.1 模拟采用随机顺序，每轮次内所有个体按照自身通行能力、道路的可通行程度随机增加自身在道路上的行进程度

    1.2 如果一个个体需要超越某个个体，则结合该个体的突破能力和被超越个体的阻碍通行能力决定其是否超越对应个体

    ​	1.2.1 若该个体超越成功，则按照 1.1 正常计算该个体的行进程度，且该个体无法在这一轮次内被其所超越的个体再次超越

    ​	1.2.2 若该个体超越失败，则该个体的行进程度不能超过其超越失败的个体的行进程度，剩余按照 1.1 计算该个体的行进程度

    ​	1.2.3 若该个体需要超越的个体是本轮次中超越该个体的个体，则按照 1.2.2 计算该个体的行进程度

    1.3 如果某个个体需要超越多个个体，按照被超越个体行进程度从小到大的顺序进行 1.2 的判断

2. 对于所有到达目标地点的个体进行记录、清除

    2.1 需要记录的内容有：该个体的出发时间刻、该个体路程中消耗的时间、该个体的路线

3. 对于所有正在地点中的个体进行开始行进检测

4. 交叉路口处理

我不知道为什么硫化钾要花这么多工夫模拟单条道路，但是在我的构想中交叉路口是重头戏。	

交叉路口可好玩了。怎样布置交通灯，怎样采取交通灯控制策略，等等，都大有可为。

每个交叉路口都有若干个pin（输入口）和port（输出口）。注意交叉路口**不**与建图耦合，图论模型需要自行把进来的车加进pin里面，从port里面弹出车辆。

交叉路口实现红绿灯，并且实现红绿灯控制策略。

万一交叉路口用不着怎么办？为了日后扩展，使用平凡的路口。

### 界面：

需要支持：

- 从指定文件中读取道路图
- 在控制台手动输入生成道路图





# 待补充

